#| label: setup
#| echo: false
#| include: true
library(data.table)
library(kableExtra)
tt <- fread("figures/tbl_longterm_trends.dat")
tt <- tt[var %in% c("DIR_att","HOR_att","GLB_att"), c("var","slope","DATA","slope.stat_sig")]
tt <- tt[var %in% c("DIR_att","GLB_att"), c("DATA","var","slope","slope.stat_sig")]
tt$slope <- tt$slope * 100
setorder(tt,DATA)
tt
tt$var
tt$var[tt$var == "DIR_att"] <- "Direct Beam"
tt$var[tt$var == "GLB_att"] <- "Global"
tt$var
#| label:   setup
#| echo:    false
#| include: true
library(data.table)
library(kableExtra)
#| echo: false
tt <- fread("figures/tbl_longterm_trends.dat")
tt <- tt[var %in% c("DIR_att","HOR_att","GLB_att"), c("var","slope","DATA","slope.stat_sig")]
tt <- tt[var %in% c("DIR_att","GLB_att"), c("DATA","var","slope","slope.stat_sig")]
tt$slope <- tt$slope * 100
setorder(tt,DATA)
tt$var[tt$var == "DIR_att"] <- "Direct Beam"
tt$var[tt$var == "GLB_att"] <- "Global"
names(tt)[names(tt)=="slope"]          <- "Change per year [%]"
names(tt)[names(tt)=="var"]            <- "Variable"
names(tt)[names(tt)=="DATA"]           <- "Sky Cond."
names(tt)[names(tt)=="slope.stat_sig"] <- "Statistical signif. [%]"
# pander(tt, emphasize.strong.rows = which(tt$`Statistical signif.` > 90, arr.ind = TRUE))
# tt$`Statistical signif. [%]` = cell_spec(tt$`Statistical signif. [%]`, color = ifelse(tt$`Statistical signif. [%]` > 50, "red", "blue"))
gcol <- rep(0, nrow(tt) )
gcol[ (tt$`Statistical signif. [%]` > 50) ] <- "blue"
kable(tt, digits = 1) %>%
column_spec(which(names(tt) == "Change per year [%]"), bold =      (tt$`Statistical signif. [%]` > 50) ) %>%
column_spec(which(names(tt) == "Change per year [%]"), strikeout = (tt$`Statistical signif. [%]` < 50) ) %>%
column_spec(which(names(tt) != "Statistical signif. [%]"),
color = gcol )
